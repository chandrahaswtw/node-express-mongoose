<%- include('./../partials/head.ejs') %> 
<link rel="stylesheet" href="/css/product.css" />
<%- include('./../partials/navigation.ejs')%>
</head>
<body>
    <main>
      <form action="<% if(edit) { %> /editProduct <%}else { %> /addProduct <% } %>" method="POST" class="editProductForm" enctype="multipart/form-data">
        <p class="addProductTitle">Add product</p>
        <%- include('./../partials/validationAlert.ejs')%> 
        <%- include('./../partials/flashAlert.ejs')%> 
        <div class="fieldWrapper">
          <label for="">Name</label>
          <input type="text" name="title" value="<% if(edit || hasError){%><%=prod.title%><%}%>" class="<%= validationErrors.find(e => e.param === 'title') ? 'validation-error' : '' %>"/>
        </div>
        <div class="fieldWrapper">
          <label for="">Image</label>
          <input type="file" name="image"/>
        </div>
        <div class="fieldWrapper">
          <label for="">Description</label>
          <textarea name="description" id="" cols="30" rows="3" class="<%= validationErrors.find(e => e.param === 'description') ? 'validation-error' : '' %>"><% if(edit || hasError) { %><%=prod.description%><%}%></textarea>
        </div>
        <div class="fieldWrapper">
          <label for="">Price</label>
          <input type="number" name="price"  value="<% if(edit || hasError) { %><%=prod.price%><%}%>" class="<%= validationErrors.find(e => e.param === 'price') ? 'validation-error' : '' %>" />
        </div>
        <div class="buttonWrapper">
          <button type="submit">
            <% if (edit) { %> Update <% } else { %> Add <% } %>
            <i class="fa-solid fa-arrow-right right-arrow"></i>
          </button>
        </div>
        <% if(edit) {%>
          <input type="hidden" name="id" value="<%= prod._id%>">
        <%}%>
      </form>
    </main>
<%- include('./../partials/head.ejs') %>